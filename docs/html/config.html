<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Hyer 的配置文件格式</TITLE>
</HEAD><BODY BGCOLOR="white" TEXT="black">
<P ALIGN="center"><CENTER><H1>Hyer 的配置文件格式</H1>
<FONT SIZE="4">
<I>    author:renlu.xu&lt;xurenlu@gmail.com&gt; </I><BR>
    Last Updated: 2009-12-22
</FONT></CENTER>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
  <UL>
  <LI><A HREF="#toc1">1. 配置文件格式</A>
  </UL>

<P></P>
<HR NOSHADE SIZE=1>
<P></P>
<A NAME="toc1"></A>
<H1>1. 配置文件格式</H1>
<P>
    Hyer的配置文件格式非常地web 2.0,可以说,是web上最应该用的配置格式,请看这样一个例子:
<div class="codediv"><pre>
&lt;root&gt;
    &lt;body&gt;
        &lt;dbconfig&gt;
            &lt;host&gt;localhost &lt;/host&gt;
            &lt;dbname&gt;testdb&lt;/dbname&gt;
            &lt;user&gt;root&lt;/user&gt;
            &lt;pass&gt;&lt;/pass&gt;
        &lt;/dbconfig&gt;
        &lt;locations&gt;
            &lt;location type="regexp"&gt;/test1/&lt;/location&gt;
            &lt;generator type="python"&gt;"".join&lt;/generator&gt;
        &lt;/locations&gt;
        &lt;locations&gt;
            &lt;location type="regexp"&gt;/test2/&lt;/location&gt;
            &lt;generator type="python"&gt;len&lt;/generator&gt;
        &lt;/locations&gt;
    &lt;/body&gt;
&lt;/root&gt;
</pre></div>
</P>
<P>
我们要读出里面的配置,代码是:
<div class="codediv"><pre>
#coding:utf-8
import hyer.config
c=open("./share/demo.conf").read()
config=hyer.config.Config(c)
</P>
<P>
#接下来两句效果一样,没错儿, 就是这样;
print config["body"]["dbconfig"]["host"]
print config["body"]["host"]
</P>
<P>
#接下来是把内容原样输出;
for t in config["body"]["locations"].sections():
    print "new section:",t
</P>
<P>
print "\n=============\n"
#接下来可以看到,配置文件中产生的数值可以是正则表达式，也可以是python内置语句或函数,够用了吧....
</P>
<P>
for t in config["body"]["locations"].sections():
    print hyer.config.Config(t)["location"].value()
    print hyer.config.Config(t)["generator"].value()
</pre></div>
</P>

<!-- html code generated by txt2tags 2.5 (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags txts/config.txt -->
</BODY></HTML>
